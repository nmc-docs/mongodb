"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[62],{7670:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>r,frontMatter:()=>d,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"crud/delete-document","title":"X\xf3a document","description":"- Delete document l\xe0 thao t\xe1c quan tr\u1ecdng \u0111\u1ec3 x\xf3a d\u1eef li\u1ec7u kh\u1ecfi c\xe1c collection trong MongoDB. MongoDB cung c\u1ea5p c\xe1c ph\u01b0\u01a1ng th\u1ee9c linh ho\u1ea1t \u0111\u1ec3 x\xf3a m\u1ed9t ho\u1eb7c nhi\u1ec1u documents d\u1ef1a tr\xean c\xe1c \u0111i\u1ec1u ki\u1ec7n c\u1ee5 th\u1ec3.","source":"@site/docs/crud/delete-document.md","sourceDirName":"crud","slug":"/crud/delete-document","permalink":"/mongodb/crud/delete-document","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Update v\xe0 Replace document","permalink":"/mongodb/crud/update-replace-document"},"next":{"title":"T\xecm ki\u1ebfm document","permalink":"/mongodb/crud/find-document"}}');var s=t(4848),i=t(8453);const d={sidebar_position:5},l="X\xf3a document",a={},o=[{value:"C\xe1c ph\u01b0\u01a1ng th\u1ee9c DELETE c\u01a1 b\u1ea3n",id:"c\xe1c-ph\u01b0\u01a1ng-th\u1ee9c-delete-c\u01a1-b\u1ea3n",level:2},{value:"<code>deleteOne()</code> - X\xf3a m\u1ed9t document",id:"deleteone---x\xf3a-m\u1ed9t-document",level:3},{value:"<code>deleteMany()</code> - X\xf3a nhi\u1ec1u documents",id:"deletemany---x\xf3a-nhi\u1ec1u-documents",level:3},{value:"C\xe1c t\xf9y ch\u1ecdn (Options) khi delete",id:"c\xe1c-t\xf9y-ch\u1ecdn-options-khi-delete",level:2},{value:"Collation (So s\xe1nh chu\u1ed7i)",id:"collation-so-s\xe1nh-chu\u1ed7i",level:3},{value:"C\xe1c k\u1ecbch b\u1ea3n DELETE ph\u1ed5 bi\u1ebfn",id:"c\xe1c-k\u1ecbch-b\u1ea3n-delete-ph\u1ed5-bi\u1ebfn",level:2},{value:"X\xf3a theo th\u1eddi gian",id:"x\xf3a-theo-th\u1eddi-gian",level:3},{value:"X\xf3a theo \u0111i\u1ec1u ki\u1ec7n ph\u1ee9c t\u1ea1p",id:"x\xf3a-theo-\u0111i\u1ec1u-ki\u1ec7n-ph\u1ee9c-t\u1ea1p",level:3},{value:"X\xf3a v\u1edbi \u0111i\u1ec1u ki\u1ec7n m\u1ea3ng",id:"x\xf3a-v\u1edbi-\u0111i\u1ec1u-ki\u1ec7n-m\u1ea3ng",level:3}];function h(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"x\xf3a-document",children:"X\xf3a document"})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Delete document"})," l\xe0 thao t\xe1c quan tr\u1ecdng \u0111\u1ec3 x\xf3a d\u1eef li\u1ec7u kh\u1ecfi c\xe1c collection trong MongoDB. MongoDB cung c\u1ea5p c\xe1c ph\u01b0\u01a1ng th\u1ee9c linh ho\u1ea1t \u0111\u1ec3 x\xf3a m\u1ed9t ho\u1eb7c nhi\u1ec1u documents d\u1ef1a tr\xean c\xe1c \u0111i\u1ec1u ki\u1ec7n c\u1ee5 th\u1ec3."]}),"\n"]})}),"\n",(0,s.jsx)(e.h2,{id:"c\xe1c-ph\u01b0\u01a1ng-th\u1ee9c-delete-c\u01a1-b\u1ea3n",children:"C\xe1c ph\u01b0\u01a1ng th\u1ee9c DELETE c\u01a1 b\u1ea3n"}),"\n",(0,s.jsxs)(e.h3,{id:"deleteone---x\xf3a-m\u1ed9t-document",children:[(0,s.jsx)(e.code,{children:"deleteOne()"})," - X\xf3a m\u1ed9t document"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"C\xfa ph\xe1p:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"db.collection.deleteOne(filter, options);\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"V\xed d\u1ee5:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// X\xf3a m\u1ed9t user theo ID\ndb.users.deleteOne({ _id: ObjectId("507f191e810c19729de860ea") })\n\n// K\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1:\n{\n    "acknowledged": true,\n    "deletedCount": 1\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"V\xed d\u1ee5 v\u1edbi \u0111i\u1ec1u ki\u1ec7n ph\u1ee9c t\u1ea1p h\u01a1n:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// X\xf3a user c\xf3 email c\u1ee5 th\u1ec3 v\xe0 status inactive\ndb.users.deleteOne({\n  email: "olduser@email.com",\n  status: "inactive",\n});\n\n// X\xf3a product h\u1ebft h\xe0ng v\xe0 kh\xf4ng c\xf3 \u0111\u01a1n \u0111\u1eb7t h\xe0ng n\xe0o\ndb.products.deleteOne({\n  stock: 0,\n  onOrder: false,\n});\n'})}),"\n",(0,s.jsxs)(e.h3,{id:"deletemany---x\xf3a-nhi\u1ec1u-documents",children:[(0,s.jsx)(e.code,{children:"deleteMany()"})," - X\xf3a nhi\u1ec1u documents"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"C\xfa ph\xe1p:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"db.collection.deleteMany(filter, options);\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"V\xed d\u1ee5:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// X\xf3a t\u1ea5t c\u1ea3 users c\xf3 status inactive\ndb.users.deleteMany({ status: "inactive" })\n\n// K\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1:\n{\n    "acknowledged": true,\n    "deletedCount": 15\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"V\xed d\u1ee5 th\u1ef1c t\u1ebf:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// X\xf3a t\u1ea5t c\u1ea3 logs c\u0169 h\u01a1n 30 ng\xe0y\ndb.logs.deleteMany({\n  createdAt: { $lt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000) },\n});\n\n// X\xf3a t\u1ea5t c\u1ea3 s\u1ea3n ph\u1ea9m trong category kh\xf4ng c\xf2n t\u1ed3n t\u1ea1i\ndb.products.deleteMany({\n  category: "discontinued",\n});\n\n// X\xf3a c\xe1c temporary sessions \u0111\xe3 h\u1ebft h\u1ea1n\ndb.sessions.deleteMany({\n  expiresAt: { $lt: new Date() },\n});\n'})}),"\n",(0,s.jsx)(e.h2,{id:"c\xe1c-t\xf9y-ch\u1ecdn-options-khi-delete",children:"C\xe1c t\xf9y ch\u1ecdn (Options) khi delete"}),"\n",(0,s.jsx)(e.h3,{id:"collation-so-s\xe1nh-chu\u1ed7i",children:"Collation (So s\xe1nh chu\u1ed7i)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// X\xf3a v\u1edbi collation cho so s\xe1nh chu\u1ed7i\ndb.users.deleteOne(\n  { name: "john" },\n  {\n    collation: {\n      locale: "en",\n      strength: 2, // Case insensitive\n    },\n  }\n);\n\n// V\xed d\u1ee5: x\xf3a kh\xf4ng ph\xe2n bi\u1ec7t hoa th\u01b0\u1eddng\ndb.categories.deleteMany(\n  { name: "ELECTRONICS" },\n  {\n    collation: {\n      locale: "en",\n      strength: 2,\n    },\n  }\n);\n'})}),"\n",(0,s.jsx)(e.h2,{id:"c\xe1c-k\u1ecbch-b\u1ea3n-delete-ph\u1ed5-bi\u1ebfn",children:"C\xe1c k\u1ecbch b\u1ea3n DELETE ph\u1ed5 bi\u1ebfn"}),"\n",(0,s.jsx)(e.h3,{id:"x\xf3a-theo-th\u1eddi-gian",children:"X\xf3a theo th\u1eddi gian"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"// X\xf3a logs c\u0169 h\u01a1n 90 ng\xe0y\nconst ninetyDaysAgo = new Date();\nninetyDaysAgo.setDate(ninetyDaysAgo.getDate() - 90);\n\ndb.systemLogs.deleteMany({\n  timestamp: { $lt: ninetyDaysAgo },\n});\n\n// X\xf3a temporary data sau 24 gi\u1edd\ndb.tempData.deleteMany({\n  created: { $lt: new Date(Date.now() - 24 * 60 * 60 * 1000) },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"x\xf3a-theo-\u0111i\u1ec1u-ki\u1ec7n-ph\u1ee9c-t\u1ea1p",children:"X\xf3a theo \u0111i\u1ec1u ki\u1ec7n ph\u1ee9c t\u1ea1p"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// X\xf3a users ch\u01b0a active trong 1 n\u0103m v\xe0 kh\xf4ng c\xf3 \u0111\u01a1n h\xe0ng\ndb.users.deleteMany({\n  $and: [\n    { lastLogin: { $lt: new Date(Date.now() - 365 * 24 * 60 * 60 * 1000) } },\n    { totalOrders: 0 },\n    { status: "inactive" },\n  ],\n});\n\n// X\xf3a products kh\xf4ng b\xe1n \u0111\u01b0\u1ee3c trong 6 th\xe1ng\ndb.products.deleteMany({\n  lastSold: { $lt: new Date(Date.now() - 180 * 24 * 60 * 60 * 1000) },\n  stock: { $gt: 0 }, // V\u1eabn c\xf2n h\xe0ng nh\u01b0ng kh\xf4ng b\xe1n \u0111\u01b0\u1ee3c\n});\n'})}),"\n",(0,s.jsx)(e.h3,{id:"x\xf3a-v\u1edbi-\u0111i\u1ec1u-ki\u1ec7n-m\u1ea3ng",children:"X\xf3a v\u1edbi \u0111i\u1ec1u ki\u1ec7n m\u1ea3ng"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"// X\xf3a posts kh\xf4ng c\xf3 comments v\xe0 kh\xf4ng c\xf3 likes\ndb.posts.deleteMany({\n  $and: [\n    { comments: { $size: 0 } },\n    { likes: { $size: 0 } },\n    { createdAt: { $lt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000) } },\n  ],\n});\n\n// X\xf3a users kh\xf4ng c\xf3 role n\xe0o\ndb.users.deleteMany({\n  roles: { $exists: true, $size: 0 },\n});\n"})})]})}function r(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>d,x:()=>l});var c=t(6540);const s={},i=c.createContext(s);function d(n){const e=c.useContext(i);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:d(n.components),c.createElement(i.Provider,{value:e},n.children)}}}]);