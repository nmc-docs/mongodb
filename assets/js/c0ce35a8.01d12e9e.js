"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[421],{3033:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>h,metadata:()=>c,toc:()=>r});const c=JSON.parse('{"id":"data-model","title":"M\xf4 h\xecnh d\u1eef li\u1ec7u","description":"Thi\u1ebft k\u1ebf schema","source":"@site/docs/data-model.md","sourceDirName":".","slug":"/data-model","permalink":"/mongodb/data-model","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Ki\u1ec3u d\u1eef li\u1ec7u","permalink":"/mongodb/data-types"},"next":{"title":"L\u1ec7nh CRUD c\u01a1 b\u1ea3n","permalink":"/mongodb/crud"}}');var s=i(4848),t=i(8453);const h={sidebar_position:3},l="M\xf4 h\xecnh d\u1eef li\u1ec7u",d={},r=[{value:"Thi\u1ebft k\u1ebf schema",id:"thi\u1ebft-k\u1ebf-schema",level:2},{value:"Embedding Documents vs Referencing (DBRefs)",id:"embedding-documents-vs-referencing-dbrefs",level:2},{value:"Embedding",id:"embedding",level:3},{value:"Referencing (Tham chi\u1ebfu)",id:"referencing-tham-chi\u1ebfu",level:3}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"m\xf4-h\xecnh-d\u1eef-li\u1ec7u",children:"M\xf4 h\xecnh d\u1eef li\u1ec7u"})}),"\n",(0,s.jsx)(e.h2,{id:"thi\u1ebft-k\u1ebf-schema",children:"Thi\u1ebft k\u1ebf schema"}),"\n",(0,s.jsx)(e.p,{children:'MongoDB l\xe0 c\u01a1 s\u1edf d\u1eef li\u1ec7u NoSQL document-oriented, ngh\u0129a l\xe0 d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef d\u01b0\u1edbi d\u1ea1ng documents (t\xe0i li\u1ec7u) m\xe0 kh\xf4ng y\xeau c\u1ea7u schema c\u1ed1 \u0111\u1ecbnh nh\u01b0 trong RDBMS. Schema \u1edf \u0111\xe2y l\xe0 "schema-on-read" ho\u1eb7c "dynamic schema", cho ph\xe9p:'}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Linh ho\u1ea1t"}),": M\u1ed7i document trong c\xf9ng m\u1ed9t collection c\xf3 th\u1ec3 c\xf3 c\u1ea5u tr\xfac kh\xe1c nhau. Ta c\xf3 th\u1ec3 th\xeam tr\u01b0\u1eddng m\u1edbi m\xe0 kh\xf4ng c\u1ea7n thay \u0111\u1ed5i to\xe0n b\u1ed9 database."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m"}),": Ph\xf9 h\u1ee3p cho \u1ee9ng d\u1ee5ng ph\xe1t tri\u1ec3n nhanh (agile development), n\u01a1i y\xeau c\u1ea7u d\u1eef li\u1ec7u thay \u0111\u1ed5i th\u01b0\u1eddng xuy\xean, nh\u01b0 startup ho\u1eb7c apps v\u1edbi user-generated content."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m"}),": C\xf3 th\u1ec3 d\u1eabn \u0111\u1ebfn d\u1eef li\u1ec7u kh\xf4ng nh\u1ea5t qu\xe1n n\u1ebfu kh\xf4ng qu\u1ea3n l\xfd t\u1ed1t, n\xean c\u1ea7n best practices \u0111\u1ec3 tr\xe1nh."]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:'V\xed d\u1ee5: Trong collection "users", m\u1ed9t document c\xf3 th\u1ec3 c\xf3 tr\u01b0\u1eddng "email", document kh\xe1c c\xf3 th\xeam "phone" m\xe0 kh\xf4ng b\xe1o l\u1ed7i.'}),"\n",(0,s.jsx)(e.p,{children:"\u0110\u1ec3 thi\u1ebft k\u1ebf schema:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"X\xe1c \u0111\u1ecbnh entities ch\xednh (e.g., users, products)."}),"\n",(0,s.jsx)(e.li,{children:"Quy\u1ebft \u0111\u1ecbnh embedding hay referencing d\u1ef1a tr\xean quan h\u1ec7 d\u1eef li\u1ec7u."}),"\n",(0,s.jsx)(e.li,{children:'S\u1eed d\u1ee5ng validation rules (t\u1eeb MongoDB 3.6) \u0111\u1ec3 enforce schema partial, v\xed d\u1ee5: Y\xeau c\u1ea7u tr\u01b0\u1eddng "name" ph\u1ea3i l\xe0 string.'}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"V\xed d\u1ee5 t\u1ea1o schema validation:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'db.createCollection("users", {\n  validator: {\n    $jsonSchema: {\n      bsonType: "object",\n      required: ["name", "email"],\n      properties: {\n        name: { bsonType: "string" },\n        email: { bsonType: "string" },\n      },\n    },\n  },\n});\n'})}),"\n",(0,s.jsx)(e.h2,{id:"embedding-documents-vs-referencing-dbrefs",children:"Embedding Documents vs Referencing (DBRefs)"}),"\n",(0,s.jsx)(e.p,{children:"MongoDB h\u1ed7 tr\u1ee3 hai c\xe1ch x\u1eed l\xfd quan h\u1ec7 d\u1eef li\u1ec7u:"}),"\n",(0,s.jsx)(e.h3,{id:"embedding",children:"Embedding"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Embedding (Nh\xfang)"})," : L\u01b0u d\u1eef li\u1ec7u li\xean quan tr\u1ef1c ti\u1ebfp v\xe0o document cha. L\xfd t\u01b0\u1edfng cho quan h\u1ec7 one-to-one ho\u1eb7c one-to-few, n\u01a1i d\u1eef li\u1ec7u con kh\xf4ng ph\xe1t tri\u1ec3n \u0111\u1ed9c l\u1eadp."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"V\xed d\u1ee5:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "_id": 1,\n  "title": "Post A",\n  "comments": [\n    { "user": "alice", "text": "Nice post!" },\n    { "user": "bob", "text": "Thanks for sharing!" }\n  ]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u01afu \u0111i\u1ec3m:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"1 query \u2192 l\u1ea5y \u0111\u1ee7 d\u1eef li\u1ec7u."}),"\n",(0,s.jsx)(e.li,{children:"Kh\xf4ng c\u1ea7n JOIN."}),"\n",(0,s.jsx)(e.li,{children:"R\u1ea5t nhanh cho use case \u0111\u1ecdc nhi\u1ec1u."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Document qu\xe1 l\u1edbn \u2192 v\u01b0\u1ee3t 16MB limit."}),"\n",(0,s.jsx)(e.li,{children:"Update m\u1ed9t ph\u1ea7n trong array c\xf3 th\u1ec3 n\u1eb7ng."}),"\n",(0,s.jsx)(e.li,{children:"Kh\xf4ng ph\xf9 h\u1ee3p d\u1eef li\u1ec7u c\xf3 t\u1ed1c \u0111\u1ed9 t\u0103ng m\u1ea1nh (unbounded arrays)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"referencing-tham-chi\u1ebfu",children:"Referencing (Tham chi\u1ebfu)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Referencing"}),": L\u01b0u ID c\u1ee7a document kh\xe1c, t\u01b0\u01a1ng t\u1ef1 foreign key trong SQL. S\u1eed d\u1ee5ng cho one-to-many ho\u1eb7c many-to-many, n\u01a1i d\u1eef li\u1ec7u con l\u1edbn ho\u1eb7c c\u1ea7n truy c\u1eadp \u0111\u1ed9c l\u1eadp."]}),"\n",(0,s.jsx)(e.li,{children:"V\xed d\u1ee5:"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"posts"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "_id": 1,\n  "title": "Post A",\n  "commentIds": [100, 101]\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"comments"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "_id": 100,\n  "postId": 1,\n  "text": "Nice post!"\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u01afu \u0111i\u1ec3m:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Document nh\u1ecf, d\u1ec5 qu\u1ea3n l\xfd."}),"\n",(0,s.jsx)(e.li,{children:"D\u1ec5 scale."}),"\n",(0,s.jsx)(e.li,{children:"Ph\xf9 h\u1ee3p d\u1eef li\u1ec7u l\u1edbn ho\u1eb7c t\u0103ng theo th\u1eddi gian."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Mu\u1ed1n l\u1ea5y \u0111\u1ee7 th\xf4ng tin \u2192 ph\u1ea3i g\u1ecdi nhi\u1ec1u query."}),"\n",(0,s.jsx)(e.li,{children:"Kh\xf4ng nhanh b\u1eb1ng embedding."}),"\n"]}),"\n"]}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>h,x:()=>l});var c=i(6540);const s={},t=c.createContext(s);function h(n){const e=c.useContext(t);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:h(n.components),c.createElement(t.Provider,{value:e},n.children)}}}]);